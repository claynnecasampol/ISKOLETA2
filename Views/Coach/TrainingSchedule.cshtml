@{
    ViewData["Title"] = "Coach TrainingSchedule";
}
@model FITNSS.Models.CoachProfileModel

@{
    var studentsapproved = ViewBag.StudentAthleteApproved.StudentListApproved as List<FITNSS.Models.StudentAthleteProfileModel>;
}

<div class="d-flex">

    @Html.Partial("Sidebar")
    <div class="main-content-student">
        <div class="container-fluid p-5">
            <div class="mb-3">
                <h2 class="m-0">Training Schedule</h2>
            </div>
            <div class="card border-0 shadow p-3" style="border-radius: 20px;">
                <h4 class="m-0">
                    <svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9V3H15V1H17V3ZM4 9V19H20V9H4ZM6 11H8V13H6V11ZM11 11H13V13H11V11ZM16 11H18V13H16V11Z"></path></svg>
                    Training Calendar
                </h4>
                <br />
                <div id="calendar"></div>
            </div>
            <br/>
            <div class="card border-0 shadow p-3" style="border-radius: 20px;">
                <form method="post" asp-controller="Coach" asp-action="TrainingSchedule">
                <h4 class="m-0">
                    <svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 22C2 17.5817 5.58172 14 10 14C14.4183 14 18 17.5817 18 22H2ZM10 13C6.685 13 4 10.315 4 7C4 3.685 6.685 1 10 1C13.315 1 16 3.685 16 7C16 10.315 13.315 13 10 13ZM17.3628 15.2332C20.4482 16.0217 22.7679 18.7235 22.9836 22H20C20 19.3902 19.0002 17.0139 17.3628 15.2332ZM15.3401 12.9569C16.9728 11.4922 18 9.36607 18 7C18 5.58266 17.6314 4.25141 16.9849 3.09687C19.2753 3.55397 21 5.57465 21 8C21 10.7625 18.7625 13 16 13C15.7763 13 15.556 12.9853 15.3401 12.9569Z"></path></svg>
                    Select Athletes
                </h4>
                <br />
                <div class="row">
                    <div class="col-lg-12">
                        <div class="my-3 px-3 row" style="row-gap: 10px;">
                            @foreach (var studentapproved in ViewBag.StudentAthleteApproved.StudentListApproved)
                            {
                                <div class="col-lg-6">
                                    <div class="card border-0 shadow p-3">
                                        <div class="m-0 d-flex align-items-center fs-5 fw-bold">
                                            <input type="checkbox" name="studentAthleteProfileId"
                                                   value="@studentapproved.studentAthleteProfileId">
                                            <span class="mx-2">@studentapproved.FullName</span>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                    <div class="col-lg-12 text-end">
                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#TrainingSchedule">Set Date & Time</button>
                    </div>
                </div>
                

                <div class="modal fade" id="TrainingSchedule" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Training Schedule</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label>Title</label>
                                                <input type="text" name="Title" class="form-control" />
                                            </div>
                                        </div>

                                        <div class="col-12">
                                            <div class="form-group">
                                                <label>Location</label>
                                                <input type="text" name="Location" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label>Notes</label>
                                                <input type="text" name="Notes" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label>Date</label>
                                                <input type="date" name="StartDate" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label>Time</label>
                                                <input type="text" name="Time" class="form-control" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Save changes</button>
                                </div>
                            </div>
                    </div>
                </div>
                </form>


            </div>
        </div>
    </div>
</div>
@Html.Partial("CoachRightSidebar")
</div>
<!-- FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css" rel="stylesheet">

<!-- FullCalendar JS (Global Build) -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');

        var calendar = new FullCalendar.Calendar(calendarEl, {
              initialView: 'dayGridWeek',
              height: 250,          // fixed height
              contentHeight: 250,
              events: '/Coach/CalendarData', // JSON from DB
              eventColor: '#3788d8', // not needed if we override background
              eventDidMount: function(info) {
                // Get the cell that contains this event
                var cell = info.el.closest('.fc-daygrid-day');
                if (cell) {
                    cell.style.backgroundColor = 'orange';
                }
            }
        });

        calendar.render();
    });
</script>

